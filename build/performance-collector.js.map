{"version":3,"file":"performance-collector.js","mappings":"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","sources":["webpack://performance-dashboard/./node_modules/web-vitals/dist/web-vitals.js","webpack://performance-dashboard/webpack/bootstrap","webpack://performance-dashboard/webpack/runtime/define property getters","webpack://performance-dashboard/webpack/runtime/hasOwnProperty shorthand","webpack://performance-dashboard/webpack/runtime/make namespace object","webpack://performance-dashboard/./assets/js/performance-collector.js"],"sourcesContent":["var e,n,t,r,i,o=-1,a=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(o=n.timeStamp,e(n))}),!0)},c=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),r=\"navigate\";o>=0?r=\"back-forward-cache\":t&&(document.prerendering||u()>0?r=\"prerender\":document.wasDiscarded?r=\"restore\":t.type&&(r=t.type.replace(/_/g,\"-\")));return{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v4-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},t||{})),r}}catch(e){}},d=function(e,n,t,r){var i,o;return function(a){n.value>=0&&(a||r)&&((o=n.value-(i||0))||void 0===i)&&(i=n.value,n.delta=o,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},p=function(e){document.addEventListener(\"visibilitychange\",(function(){\"hidden\"===document.visibilityState&&e()}))},v=function(e){var n=!1;return function(){n||(e(),n=!0)}},m=-1,h=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){\"hidden\"===document.visibilityState&&m>-1&&(m=\"visibilitychange\"===e.type?e.timeStamp:0,T())},y=function(){addEventListener(\"visibilitychange\",g,!0),addEventListener(\"prerenderingchange\",g,!0)},T=function(){removeEventListener(\"visibilitychange\",g,!0),removeEventListener(\"prerenderingchange\",g,!0)},E=function(){return m<0&&(m=h(),y(),a((function(){setTimeout((function(){m=h(),y()}),0)}))),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},b=[1800,3e3],S=function(e,n){n=n||{},C((function(){var t,r=E(),i=f(\"FCP\"),o=s(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-u(),0),i.entries.push(e),t(!0)))}))}));o&&(t=d(e,i,b,n.reportAllChanges),a((function(r){i=f(\"FCP\"),t=d(e,i,b,n.reportAllChanges),l((function(){i.value=performance.now()-r.timeStamp,t(!0)}))})))}))},L=[.1,.25],w=function(e,n){n=n||{},S(v((function(){var t,r=f(\"CLS\",0),i=0,o=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=o[0],t=o[o.length-1];i&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>r.value&&(r.value=i,r.entries=o,t())},u=s(\"layout-shift\",c);u&&(t=d(e,r,L,n.reportAllChanges),p((function(){c(u.takeRecords()),t(!0)})),a((function(){i=0,r=f(\"CLS\",0),t=d(e,r,L,n.reportAllChanges),l((function(){return t()}))})),setTimeout(t,0))})))},A=0,I=1/0,P=0,M=function(e){e.forEach((function(e){e.interactionId&&(I=Math.min(I,e.interactionId),P=Math.max(P,e.interactionId),A=P?(P-I)/7+1:0)}))},k=function(){\"interactionCount\"in performance||e||(e=s(\"event\",M,{type:\"event\",buffered:!0,durationThreshold:0}))},F=[],D=new Map,x=0,R=function(){return(e?A:performance.interactionCount||0)-x},B=[],H=function(e){if(B.forEach((function(n){return n(e)})),e.interactionId||\"first-input\"===e.entryType){var n=F[F.length-1],t=D.get(e.interactionId);if(t||F.length<10||e.duration>n.latency){if(t)e.duration>t.latency?(t.entries=[e],t.latency=e.duration):e.duration===t.latency&&e.startTime===t.entries[0].startTime&&t.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};D.set(r.id,r),F.push(r)}F.sort((function(e,n){return n.latency-e.latency})),F.length>10&&F.splice(10).forEach((function(e){return D.delete(e.id)}))}}},q=function(e){var n=self.requestIdleCallback||self.setTimeout,t=-1;return e=v(e),\"hidden\"===document.visibilityState?e():(t=n(e),p(e)),t},O=[200,500],N=function(e,n){\"PerformanceEventTiming\"in self&&\"interactionId\"in PerformanceEventTiming.prototype&&(n=n||{},C((function(){var t;k();var r,i=f(\"INP\"),o=function(e){q((function(){e.forEach(H);var n,t=(n=Math.min(F.length-1,Math.floor(R()/50)),F[n]);t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},c=s(\"event\",o,{durationThreshold:null!==(t=n.durationThreshold)&&void 0!==t?t:40});r=d(e,i,O,n.reportAllChanges),c&&(c.observe({type:\"first-input\",buffered:!0}),p((function(){o(c.takeRecords()),r(!0)})),a((function(){x=0,F.length=0,D.clear(),i=f(\"INP\"),r=d(e,i,O,n.reportAllChanges)})))})))},j=[2500,4e3],_={},z=function(e,n){n=n||{},C((function(){var t,r=E(),i=f(\"LCP\"),o=function(e){n.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-u(),0),i.entries=[e],t())}))},c=s(\"largest-contentful-paint\",o);if(c){t=d(e,i,j,n.reportAllChanges);var m=v((function(){_[i.id]||(o(c.takeRecords()),c.disconnect(),_[i.id]=!0,t(!0))}));[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,(function(){return q(m)}),!0)})),p(m),a((function(r){i=f(\"LCP\"),t=d(e,i,j,n.reportAllChanges),l((function(){i.value=performance.now()-r.timeStamp,_[i.id]=!0,t(!0)}))}))}}))},G=[800,1800],J=function e(n){document.prerendering?C((function(){return e(n)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},K=function(e,n){n=n||{};var t=f(\"TTFB\"),r=d(e,t,G,n.reportAllChanges);J((function(){var i=c();i&&(t.value=Math.max(i.responseStart-u(),0),t.entries=[i],r(!0),a((function(){t=f(\"TTFB\",0),(r=d(e,t,G,n.reportAllChanges))(!0)})))}))},Q={passive:!0,capture:!0},U=new Date,V=function(e,i){n||(n=i,t=e,r=new Date,Y(removeEventListener),W())},W=function(){if(t>=0&&t<r-U){var e={entryType:\"first-input\",name:n.type,target:n.target,cancelable:n.cancelable,startTime:n.timeStamp,processingStart:n.timeStamp+t};i.forEach((function(n){n(e)})),i=[]}},X=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){V(e,n),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",t,Q),removeEventListener(\"pointercancel\",r,Q)};addEventListener(\"pointerup\",t,Q),addEventListener(\"pointercancel\",r,Q)}(n,e):V(n,e)}},Y=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,X,Q)}))},Z=[100,300],$=function(e,r){r=r||{},C((function(){var o,c=E(),u=f(\"FID\"),l=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),o(!0))},m=function(e){e.forEach(l)},h=s(\"first-input\",m);o=d(e,u,Z,r.reportAllChanges),h&&(p(v((function(){m(h.takeRecords()),h.disconnect()}))),a((function(){var a;u=f(\"FID\"),o=d(e,u,Z,r.reportAllChanges),i=[],t=-1,n=null,Y(addEventListener),a=l,i.push(a),W()})))}))};export{L as CLSThresholds,b as FCPThresholds,Z as FIDThresholds,O as INPThresholds,j as LCPThresholds,G as TTFBThresholds,w as onCLS,S as onFCP,$ as onFID,N as onINP,z as onLCP,K as onTTFB};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { onTTFB, onCLS, onINP, onLCP } from 'web-vitals';\n\nconst metricsSent = {\n  ttfb: false,\n  lcp: false,\n  cls: false,\n  inp: false,\n};\n\nfunction sendToAnalytics(metric) {\n  const { name, value } = metric;\n  const metricName = name.toLowerCase();\n\n  const data = new FormData();\n  data.append('action', 'save_performance_data');\n  data.append('url', window.location.href);\n  data.append('nonce', performanceData.nonce);\n  data.append(metricName, value);\n\n  if (navigator.sendBeacon) {\n    navigator.sendBeacon(performanceData.ajax_url, data);\n  } else {\n    fetch(performanceData.ajax_url, {\n      body: data,\n      method: 'POST',\n      keepalive: true,\n    });\n  }\n\n  metricsSent[metricName] = true;\n  console.log(`Sent ${metricName}: ${value}`);\n\n  checkAllMetricsSent();\n}\n\nfunction checkAllMetricsSent() {\n  if (Object.values(metricsSent).every(Boolean)) {\n    console.log('All metrics have been sent successfully.');\n  }\n}\n\nonTTFB(sendToAnalytics);\nonCLS(sendToAnalytics);\nonINP(sendToAnalytics);\nonLCP(sendToAnalytics);\n\nwindow.addEventListener('unload', () => {\n  for (const [metric, sent] of Object.entries(metricsSent)) {\n    if (!sent) {\n      console.log(`${metric} was not captured and sent.`);\n    }\n  }\n});\n"],"names":["onTTFB","onCLS","onINP","onLCP","metricsSent","ttfb","lcp","cls","inp","sendToAnalytics","metric","name","value","metricName","toLowerCase","data","FormData","append","window","location","href","performanceData","nonce","navigator","sendBeacon","ajax_url","fetch","body","method","keepalive","console","log","checkAllMetricsSent","Object","values","every","Boolean","addEventListener","sent","entries"],"sourceRoot":""}